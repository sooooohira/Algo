setでイテレーターはやめとけ

a÷b=x(mod pではpとbは互いに素でｐは素数)同値a=bx(mod p)で   xは一意に決まる（）
よって1÷b(mod p)を求めて、aかければx求められる！！

bitによる部分集合の列挙
for (int y = z; ; y = (y - 1) & z) {
    ...
    if (y == 0) break;
}でいけるよ！！
